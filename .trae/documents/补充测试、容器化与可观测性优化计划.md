## 目标
- 增加“任务过期”和“客户端至少 1 次/分钟”的单元测试，完善可测试性。
- 提供容器化依赖（PostgreSQL、RabbitMQ）与 README 快速启动示例。
- 增加可观测性与长时运行优化：提交指标与旧 nonce 清理。

## 代码改动
- 客户端可测试化：为 `client/app.Client` 增加可配置的频率参数（秒级与“分钟”周期），默认不变，测试中注入短周期来验证“至少 1 次/分钟”。
- 服务端任务过期测试支持：在创建 `AppServer` 时传入 `expireAfter`（当前已支持），新增对应测试用例。
- 容器化：新增 `docker-compose.yml`，包含 `postgres:15` 与 `rabbitmq:3-management`，README 增加一键启动与环境变量配置示例。
- 可观测性：
  - 在 `Listener` 增加内存计数器（成功/失败/限速/重复），
  - 新增 `cmd` 下轻量 `/metrics` HTTP 端点输出文本指标（避免引入新依赖），由服务端可选启动（flag/env）。
- 内存清理：在 `Coordinator` 中为 `UsedNonces` 保留最近 N 个 `job_id` 的窗口；在任务轮换时清理更老的条目（默认 N=64，可配置）。

## 测试
- 任务过期：设置 `expireAfter=500ms`，广播后延迟 ≥500ms，提交返回 `Task expired`。
- 客户端保底提交：通过注入“分钟”为 3s，观察 3s 窗口内至少一次提交（断言响应/或统计自增）。
- 容器化集成：
  - `docker-compose up -d` 启动依赖，设置 `KUP_PG_DSN` 与 `KUP_MQ_URL`，服务端选择 `pg`+`rabbit`，客户端提交后统计入库与队列消费成功。

## 文档
- README 增加容器化启动、测试说明与 `/metrics` 端点说明（端口与输出示例）。

## 验证
- 本地：`go build ./...` 与 `go test ./... -v` 通过。
- 容器化：按 README 运行端到端，观察日志与指标。